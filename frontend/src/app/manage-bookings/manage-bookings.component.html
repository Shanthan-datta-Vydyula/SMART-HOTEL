<div class="container mt-4">
  <div class="header-section mb-4">
    <button class="back-btn" (click)="goBack()">
      <i class="bi bi-arrow-left"></i> Back to Dashboard
    </button>
    <div class="header-content">
      <h1 class="manager-heading">Manage Bookings</h1>
      <p class="text-muted">Manage all hotel bookings and reservations</p>
    </div>
  </div>

  <!-- Simple Filter Bar -->
  <div class="simple-filter-bar mb-4">
    <div class="row g-3">
      <div class="col-md-6">
        <input 
          type="text" 
          class="form-control" 
          placeholder="Search by hotel name, customer name, or booking ID..."
          [(ngModel)]="searchTerm"
          (input)="onSearchChange()">
      </div>
      <div class="col-md-3">
        <select 
          class="form-select" 
          [(ngModel)]="selectedStatus"
          (change)="onStatusChange()">
          <option value="all">All Status</option>
          <option value="pending">Pending</option>
          <option value="confirmed">Confirmed</option>
          <option value="cancelled">Cancelled</option>
        </select>
      </div>
      <div class="col-md-3">
        <div class="filter-info">
          <small class="text-muted">
            Showing {{ filteredBookings.length }} of {{ allBookings.length }} bookings
          </small>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border manager-spinner" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading bookings...</p>
  </div>

  <!-- Summary Stats -->
  <!-- <div *ngIf="!loading && allBookings.length > 0" class="stats-section mb-4">
    <div class="row">
      <div class="col-md-3">
        <div class="stat-card">
          <div class="stat-number">{{ allBookings.length }}</div>
          <div class="stat-label">Total Bookings</div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="stat-card">
          <div class="stat-number">{{ getBookingCountByStatus('confirmed') }}</div>
          <div class="stat-label">Confirmed</div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="stat-card">
          <div class="stat-number">{{ getBookingCountByStatus('pending') }}</div>
          <div class="stat-label">Pending</div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="stat-card">
          <div class="stat-number">{{ getBookingCountByStatus('cancelled') }}</div>
          <div class="stat-label">Cancelled</div>
        </div>
      </div>
    </div>
  </div> -->

  <!-- Bookings Cards -->
  <div class="bookings-container">
    <!-- Single Card Template with Loop -->
    <div class="booking-card" *ngFor="let booking of filteredBookings">
      <div class="card-header">
        <div class="booking-id">{{ booking.bookingId }}</div>
        <span class="status-badge" [ngClass]="'status-' + booking.status">{{ booking.status | titlecase }}</span>
      </div>
      <div class="card-body">
        <div class="customer-section">
          <h5 class="customer-name">{{ booking.userId.name }}</h5>
          <p class="customer-email">{{ booking.userId.email }}</p>
        </div>
        <div class="hotel-section">
          <h6 class="hotel-name">{{ booking.hotelId.hotelName }}</h6>
          <p class="hotel-location">{{ booking.hotelId.address.city }}</p>
        </div>
        <div class="booking-details">
          <div class="detail-row">
            <span class="label">Check-in:</span>
            <span class="value">{{ booking.startDate | date}}</span>
          </div>
          <div class="detail-row">
            <span class="label">Check-out:</span>
            <span class="value">{{ booking.endDate | date }}</span>
          </div>
          <div class="detail-row">
            <span class="label">Guests:</span>
            <span class="value">{{ booking.guests[0].guestDetails.adults }}</span>
          </div>
          <div class="detail-row">
            <span class="label">Rooms:</span>
            <span class="value">{{ booking.guests[0].guestDetails.rooms }}</span>
          </div>
          <div class="detail-row price-row">
            <span class="label">Total Price:</span>
            <span class="value price">â‚¹{{ booking.price* booking.guests[0].guestDetails.rooms | number }}</span>
          </div>
        </div>
        <div class="action-buttons">
          <div *ngIf="!isBookingProcessed(booking)" class="button-group">
            <button 
              class="btn btn-success confirm-btn" 
              (click)="confirmBooking(booking)">
              <i class="bi bi-check-circle"></i> Confirm
            </button>
            <button 
              class="btn btn-danger cancel-btn" 
              (click)="cancelBooking(booking)">
              <i class="bi bi-x-circle"></i> Cancel
            </button>
          </div>
          <div *ngIf="isBookingProcessed(booking)" class="button-group">
            <button class="btn btn-secondary processed-btn" disabled>
              <i class="bi bi-check2-all"></i> Processed
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>